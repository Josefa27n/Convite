<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convite</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:'Poppins', Arial, sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
  color:white;
  text-align:center;
  background:black;
}
.card{
  position:relative;
  background:rgba(0,0,0,0.65);
  backdrop-filter:blur(6px);
  padding:40px 30px;
  border-radius:18px;
  width:340px;
  max-width:90%;
  box-shadow:0 0 20px rgba(0,0,0,0.7);
  overflow:visible;
}
.tremendo{ animation: tremer 1.8s infinite alternate; }
button{
  padding:14px 28px;
  margin:8px;
  font-size:18px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  transition:0.2s;
  font-weight:600;
  position:fixed; /* FIXO desde o inÃ­cio */
}
.sim{ background:linear-gradient(45deg,#00c853,#00e676); color:black; }
.nao{ background:linear-gradient(45deg,#d50000,#ff5252); color:white; }
#nome{ font-size:26px; color:#ffcc00; margin-bottom:10px; }
#pergunta{ font-size:20px; margin-bottom:15px; }
#msg{ font-size:16px; margin-bottom:20px; color:#00e676; }
@keyframes tremer{
  0%{ transform:translate(0,0) rotate(0deg); }
  50%{ transform:translate(1px,-1px) rotate(0.2deg); }
  100%{ transform:translate(-1px,1px) rotate(-0.2deg); }
}
</style>
</head>
<body>

<div class="card tremendo">
  <h1 id="nome"></h1>
  <p id="pergunta">VocÃª vai?</p>
  <p id="msg"></p>
  <button class="sim" id="btnSim">SIM</button>
  <button class="nao" id="btnNao">NÃƒO</button>
</div>

<script>
const nome = new URLSearchParams(location.search).get("nome") || "Convidado";
document.getElementById("nome").innerText = nome + ",";

const btnSim = document.getElementById("btnSim");
const btnNao = document.getElementById("btnNao");

// POSIÃ‡ÃƒO INICIAL FIXA do botÃ£o SIM
const posInicial = { x: 250, y: 200 }; // ajustar conforme layout
btnSim.style.left = posInicial.x + "px";
btnSim.style.top  = posInicial.y + "px";

// limites mÃ¡ximos de deslocamento
const MAX_DESLOC_X = 100; // px esquerda/direita
const MAX_DESLOC_Y = 100; // px cima/baixo

function moverBotao(){
  const dx = (Math.random() * 2 - 1) * MAX_DESLOC_X;
  const dy = (Math.random() * 2 - 1) * MAX_DESLOC_Y;
  btnSim.style.left = (posInicial.x + dx) + "px";
  btnSim.style.top  = (posInicial.y + dy) + "px";
  btnSim.style.zIndex = "999";
}

function ativarFuga(){
  document.addEventListener("mousemove", (e)=>{
    const rect = btnSim.getBoundingClientRect();
    const centroX = rect.left + rect.width/2;
    const centroY = rect.top + rect.height/2;
    const distancia = Math.sqrt((e.clientX - centroX)**2 + (e.clientY - centroY)**2);
    if(distancia < 120){
      moverBotao();
    }
  });

  btnSim.addEventListener("touchstart", (e)=>{
    e.preventDefault();
    moverBotao();
  });
  btnSim.addEventListener("mousedown", (e)=>{
    e.preventDefault();
    moverBotao();
  });
}

const etapas = [
  "VocÃª vai?",
  "VocÃª tem certeza?",
  "VocÃª tem certeza absoluta?",
  "Ã‰ sua Ãºltima chance de dizer nÃ£o..."
];
let etapaAtual = 0;

function responder(resp){
  const pergunta = document.getElementById("pergunta");
  const msg = document.getElementById("msg");

  if(resp === "SIM"){
    etapaAtual++;
    if(etapaAtual < etapas.length){
      pergunta.innerText = etapas[etapaAtual];
      if(etapaAtual === etapas.length - 1) ativarFuga();
      return;
    }
  }
  if(resp === "NAO"){
    msg.innerText = "fico triste com uma notÃ­cia dessa ðŸ¥³ðŸŽ‰";
  }
}

// eventos
btnSim.addEventListener("click", ()=>responder("SIM"));
btnNao.addEventListener("click", ()=>responder("NAO"));
</script>

</body>
</html>
