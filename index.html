<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convite</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:'Poppins', Arial, sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
  color:white;
  text-align:center;
  background:black;
}
html, body{
  width:100%;
  height:100%;
  overflow:hidden;
}

/* √Årea onde o bot√£o pode fugir */
.safe-area{
  position: fixed;
  inset: 10%;
  pointer-events: none;
}

/* V√≠deo de fundo */
#bg{
  position:fixed;
  inset:0;
  z-index:-2;
  width:100%;
  height:100%;
  object-fit:cover;
  pointer-events:none;
}

/* Card central menor */
.card{
  position:relative;
  background:rgba(0,0,0,0.65);
  backdrop-filter:blur(6px);
  padding:20px 15px;
  border-radius:16px;
  width:260px;
  max-width:80%;
  box-shadow:0 0 20px rgba(0,0,0,0.7);
  overflow: visible;
  animation: raioGlow 2s infinite;
}
.tremendo{ animation: tremer 1.8s infinite alternate; }

/* Textos */
#nome{ font-size:20px; color:#ffcc00; margin-bottom:8px; animation: textoGlow 2s infinite alternate; }
#pergunta{ font-size:16px; margin-bottom:12px; animation: subirDescer 3s ease-in-out infinite; }
#msg{ font-size:14px; margin-bottom:16px; color:#00e676; }

/* Bot√µes */
button{
  padding:10px 20px;
  margin:6px;
  font-size:16px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
  position:relative;
  transition:0.2s;
}
.sim{ background:linear-gradient(45deg,#00c853,#00e676); color:black; }
.nao{ background:linear-gradient(45deg,#d50000,#ff5252); color:white; }
button:hover{ transform:none; }

/* Anima√ß√µes */
@keyframes tremer{
  0%{ transform:translate(0,0) rotate(0deg); }
  50%{ transform:translate(1px,-1px) rotate(0.2deg); }
  100%{ transform:translate(-1px,1px) rotate(-0.2deg); }
}
@keyframes raioGlow{
  0%{ box-shadow:0 0 10px #00e5ff, 0 0 30px #ff00ff; }
  50%{ box-shadow:0 0 20px #00e5ff, 0 0 60px #ff00ff; }
  100%{ box-shadow:0 0 10px #00e5ff, 0 0 30px #ff00ff; }
}
@keyframes textoGlow{
  from{ text-shadow:0 0 5px #ffcc00; }
  to{ text-shadow:0 0 20px #ffcc00, 0 0 40px #ff9800; }
}
@keyframes subirDescer{
  0%,100%{ transform:translateY(0); }
  50%{ transform:translateY(-4px); }
}

/* Ajuste para celular */
@media (max-width:768px){
  .card{ width:180px; padding:12px; border-radius:12px; }
  #nome{ font-size:14px; margin-bottom:4px; }
  #pergunta{ font-size:13px; margin-bottom:6px; }
  #msg{ font-size:12px; margin-bottom:6px; }
  button{ padding:6px 10px; font-size:12px; margin:4px; border-radius:8px; }
}
</style>
</head>
<body>

<video id="bg" autoplay muted loop playsinline webkit-playsinline>
  <source src="fundo.mp4" type="video/mp4" media="(min-width: 769px)">
  <source src="fundo-mobile.mp4" type="video/mp4" media="(max-width: 768px)">
</video>

<div class="safe-area" id="safeArea"></div>

<div class="card tremendo">
  <h1 id="nome"></h1>
  <p id="pergunta">Voc√™ vai?</p>
  <p id="msg"></p>
  <div class="botoes">
    <button class="sim" id="btnSim" onclick="responder('SIM')">SIM</button>
    <button class="nao" onclick="responder('NAO')">N√ÉO</button>
  </div>
</div>

<script>
const nome = new URLSearchParams(location.search).get("nome") || "Convidado";
document.getElementById("nome").innerText = nome + ",";

const btnSim = document.getElementById("btnSim");
const btnNao = document.querySelector(".nao");

function moverBotao(){
  const margem = 8;
  const area = document.getElementById("safeArea").getBoundingClientRect();
  const bw = btnSim.offsetWidth;
  const bh = btnSim.offsetHeight;
  const naoRect = btnNao.getBoundingClientRect();
  let x, y, tentativas = 0;

  do {
    x = area.left + Math.random() * (area.width - bw - 2*margem) + margem;
    y = area.top  + Math.random() * (area.height - bh - 2*margem) + margem;
    tentativas++;
    if(tentativas > 50) break;
  } while (
    x > naoRect.left - bw &&
    x < naoRect.right &&
    y > naoRect.top - bh &&
    y < naoRect.bottom
  );

  btnSim.style.position = "fixed";
  btnSim.style.left = x + "px";
  btnSim.style.top  = y + "px";
  btnSim.style.zIndex = "999";
}

function ativarFuga(){
  document.addEventListener("mousemove", (e) => {
    const rect = btnSim.getBoundingClientRect();
    const dx = e.clientX - (rect.left + rect.width/2);
    const dy = e.clientY - (rect.top + rect.height/2);
    if(Math.sqrt(dx*dx + dy*dy) < 120){
      moverBotao();
    }
  });

  btnSim.addEventListener("touchstart", moverBotao);
  btnSim.addEventListener("mousedown", (e)=>{ e.preventDefault(); moverBotao(); });
}

const etapas = [
  "Voc√™ vai?",
  "Voc√™ tem certeza?",
  "Voc√™ tem certeza absoluta?",
  "√â sua √∫ltima chance de dizer n√£o..."
];
let etapaAtual = 0;

function responder(resp){
  const pergunta = document.getElementById("pergunta");
  const msg = document.getElementById("msg");
  if(resp==="SIM"){
    etapaAtual++;
    if(etapaAtual < etapas.length){
      pergunta.innerText = etapas[etapaAtual];
      if(etapaAtual === etapas.length-1) ativarFuga();
      return;
    }
  }
  if(resp==="NAO"){
    msg.innerText = "fico triste com uma not√≠cia dessa ü•≥üéâ";
  }
}
</script>

</body>
</html>
