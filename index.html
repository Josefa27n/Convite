<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Convite</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Poppins', Arial, sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
  color:white;
  text-align:center;
  background:black;
  overflow:hidden; /* evita expandir a página */
}

#bg{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-1;
}

/* CAIXA CENTRAL */
.card{
  background:rgba(0,0,0,0.65);
  backdrop-filter:blur(6px);
  padding:40px 30px;
  border-radius:18px;
  width:340px;
  max-width:90%;
  box-shadow:0 0 40px rgba(0,0,0,0.7);
  animation: tremer 1.5s infinite alternate, raio 2s infinite;
}

/* TEXTOS */
#nome{
  font-size:26px;
  color:#ffcc00;
  margin-bottom:10px;
}

#pergunta{
  font-size:20px;
  margin-bottom:15px;
  animation: pop 0.25s ease;
}

#msg{
  font-size:16px;
  margin-bottom:20px;
  color:#00e676;
}

/* BOTÕES */
button{
  padding:14px 28px;
  margin:8px;
  font-size:18px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  transition:0.2s;
  font-weight:600;
}

.sim{
  background:linear-gradient(45deg,#00c853,#00e676);
  color:black;
}

.nao{
  background:linear-gradient(45deg,#d50000,#ff5252);
  color:white;
}

button:hover{
  transform:scale(1.08);
}

/* ANIMAÇÕES */
@keyframes pop {
  0%   { transform: scale(0.9); opacity: 0.6; }
  60%  { transform: scale(1.05); opacity: 1; }
  100% { transform: scale(1); }
}

@keyframes tremer {
  0% { transform: translate(0,0); }
  25% { transform: translate(1px,-1px); }
  50% { transform: translate(-1px,1px); }
  75% { transform: translate(1px,1px); }
  100% { transform: translate(0,0); }
}

@keyframes raio {
  0%   { box-shadow: 0 0 10px #00e5ff, 0 0 25px #ff00ff; }
  50%  { box-shadow: 0 0 20px #00e5ff, 0 0 45px #ff00ff; }
  100% { box-shadow: 0 0 10px #00e5ff, 0 0 25px #ff00ff; }
}
</style>
</head>

<body>

<video autoplay muted loop playsinline id="bg">
  <source src="fundo.mp4" type="video/mp4">
</video>

<div class="card">
  <h1 id="nome"></h1>
  <p id="pergunta">Você vai?</p>
  <p id="msg"></p>

  <button class="sim" id="btnSim" onclick="responder('SIM')">SIM</button>
  <button class="nao" onclick="responder('NAO')">NÃO</button>
</div>

<script>
const nome = new URLSearchParams(location.search).get("nome") || "Convidado";
document.getElementById("nome").innerText = nome + ",";

const btnSim = document.getElementById("btnSim");
const pergunta = document.getElementById("pergunta");

function moverBotao(){
  const largura = window.innerWidth - btnSim.offsetWidth - 20;
  const altura = window.innerHeight - btnSim.offsetHeight - 20;

  const x = Math.random() * largura;
  const y = Math.random() * altura;

  btnSim.style.position = "fixed";
  btnSim.style.left = x + "px";
  btnSim.style.top = y + "px";
}

function ativarFuga(){
  document.addEventListener("mousemove", (e) => {
    const rect = btnSim.getBoundingClientRect();
    const centroX = rect.left + rect.width / 2;
    const centroY = rect.top + rect.height / 2;

    const dx = e.clientX - centroX;
    const dy = e.clientY - centroY;
    const distancia = Math.sqrt(dx * dx + dy * dy);

    if(distancia < 120){
      moverBotao();
    }
  });

  btnSim.addEventListener("touchstart", moverBotao);

  btnSim.addEventListener("mousedown", (e) => {
    e.preventDefault();
    moverBotao();
  });
}

const etapas = [
  "Você vai?",
  "Você tem certeza?",
  "Você tem certeza absoluta?",
  "É sua última chance de dizer não..."
];

let etapaAtual = 0;

function animarPergunta(){
  pergunta.style.animation = "none";
  pergunta.offsetHeight; // força reflow
  pergunta.style.animation = "pop 0.25s ease";
}

function responder(resp){
  if(resp === "SIM"){
    etapaAtual++;

    if(etapaAtual < etapas.length){
      pergunta.innerText = etapas[etapaAtual];
      animarPergunta();

      if(etapaAtual === etapas.length - 1){
        ativarFuga();
      }
      return;
    }
  }

  fetch("COLE_AQUI_URL_DO_SCRIPT",{
    method:"POST",
    body:JSON.stringify({nome,resposta:resp,data:new Date()}),
    headers:{"Content-Type":"application/json"}
  }).then(()=>{
    document.getElementById("msg").innerText = "Resposta enviada!";
  });
}
</script>

</body>
</html>
