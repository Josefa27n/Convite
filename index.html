<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Convite</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Poppins', Arial, sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
  color:white;
  text-align:center;
  background:black;
  overflow:hidden;
}

#bg{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-2;
}

/* CAIXA CENTRAL */
.card{
  position:relative;
  background:rgba(0,0,0,0.65);
  backdrop-filter:blur(6px);
  padding:40px 30px;
  border-radius:18px;
  width:340px;
  max-width:90%;
  box-shadow:0 0 20px rgba(0,0,0,0.7);
  overflow:hidden;
  animation: tremer 1.8s infinite alternate, raioGlow 2s infinite;
}

/* RAIOS */
.raios{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:0;
  opacity:0.9;
}
.raios svg{ width:100%; height:100%; }

/* TEXTOS */
#nome, #pergunta, #msg, .botoes{ position:relative; z-index:1; }

#nome{
  font-size:26px;
  color:#ffcc00;
  margin-bottom:10px;
  animation: textoGlow 2s infinite alternate;
}

#pergunta{
  font-size:20px;
  margin-bottom:15px;
  animation: subirDescer 3s ease-in-out infinite;
}

#msg{
  font-size:16px;
  margin-bottom:20px;
  color:#00e676;
}

/* BOTÃ•ES */
button{
  padding:14px 28px;
  margin:8px;
  font-size:18px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  transition:0.2s;
  font-weight:600;
}
.sim{ background:linear-gradient(45deg,#00c853,#00e676); color:black; }
.nao{ background:linear-gradient(45deg,#d50000,#ff5252); color:white; }
button:hover{ transform:scale(1.08); }

/* ANIMAÃ‡Ã•ES */
@keyframes tremer{
  0%{ transform:translate(0,0) rotate(0deg); }
  50%{ transform:translate(1px,-1px) rotate(0.2deg); }
  100%{ transform:translate(-1px,1px) rotate(-0.2deg); }
}
@keyframes raioGlow{
  0%{ box-shadow:0 0 10px #00e5ff, 0 0 30px #ff00ff; }
  50%{ box-shadow:0 0 20px #00e5ff, 0 0 60px #ff00ff; }
  100%{ box-shadow:0 0 10px #00e5ff, 0 0 30px #ff00ff; }
}
@keyframes textoGlow{
  from{ text-shadow:0 0 5px #ffcc00; }
  to{ text-shadow:0 0 20px #ffcc00, 0 0 40px #ff9800; }
}
@keyframes subirDescer{
  0%,100%{ transform:translateY(0); }
  50%{ transform:translateY(-4px); }
}
@keyframes relampago{
  0%{ opacity:0; }
  20%{ opacity:1; }
  40%{ opacity:0; }
  100%{ opacity:0; }
}
.raio1{ animation: relampago 4s infinite; }
.raio2{ animation: relampago 5s infinite 1s; }
.raio3{ animation: relampago 6s infinite 2s; }

/* FOGOS */
.rocket{
  position:fixed;
  bottom:-20px;
  width:4px;
  height:20px;
  background:linear-gradient(to top, #fff, transparent);
  animation: subir 1s ease-out forwards;
}
@keyframes subir{
  from{ transform:translateY(0); opacity:1; }
  to{ transform:translateY(var(--altura)); opacity:0; }
}

.firework{
  position:fixed;
  width:6px;
  height:6px;
  border-radius:50%;
  pointer-events:none;
  animation: explodir 1.4s ease-out forwards;
}
@keyframes explodir{
  from{ transform:translate(0,0) scale(1); opacity:1; }
  to{ transform:translate(var(--x), var(--y)) scale(0); opacity:0; }
}
</style>
</head>

<body>

<video autoplay muted loop playsinline id="bg">
  <source src="fundo.mp4" type="video/mp4">
</video>

<div class="card">
  <div class="raios">
    <svg viewBox="0 0 300 400" preserveAspectRatio="none">
      <polyline class="raio1" points="50,0 80,80 40,140 90,220 60,300" fill="none" stroke="#00e5ff" stroke-width="2"/>
      <polyline class="raio2" points="200,0 170,90 210,160 160,240 190,330" fill="none" stroke="#ff00ff" stroke-width="2"/>
      <polyline class="raio3" points="120,0 140,70 110,140 150,210 130,300" fill="none" stroke="#ffffff" stroke-width="1"/>
    </svg>
  </div>

  <h1 id="nome"></h1>
  <p id="pergunta">VocÃª vai?</p>
  <p id="msg"></p>

  <div class="botoes">
    <button class="sim" id="btnSim" onclick="responder('SIM')">SIM</button>
    <button class="nao" onclick="responder('NAO')">NÃƒO</button>
  </div>
</div>

<script>
const nome = new URLSearchParams(location.search).get("nome") || "Convidado";
document.getElementById("nome").innerText = nome + ",";

const btnSim = document.getElementById("btnSim");

function moverBotao(){
  const largura = window.innerWidth - btnSim.offsetWidth - 20;
  const altura = window.innerHeight - btnSim.offsetHeight - 20;
  const x = Math.random() * largura;
  const y = Math.random() * altura;
  btnSim.style.position = "fixed";
  btnSim.style.left = x + "px";
  btnSim.style.top = y + "px";
}

function ativarFuga(){
  document.addEventListener("mousemove", (e) => {
    const rect = btnSim.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;
    const d = Math.hypot(e.clientX - cx, e.clientY - cy);
    if(d < 120) moverBotao();
  });
  btnSim.addEventListener("touchstart", moverBotao);
  btnSim.addEventListener("mousedown", e => { e.preventDefault(); moverBotao(); });
}

const etapas = [
  "VocÃª vai?",
  "VocÃª tem certeza?",
  "VocÃª tem certeza absoluta?",
  "Ã‰ sua Ãºltima chance de dizer nÃ£o..."
];
let etapaAtual = 0;

/* ðŸŽ† FOGOS SUBINDO DO CHÃƒO */
function fogosAnoNovo(){
  for(let f=0; f<6; f++){
    const x = Math.random() * window.innerWidth;
    const altura = -(200 + Math.random()*300);

    const rocket = document.createElement("div");
    rocket.className = "rocket";
    rocket.style.left = x + "px";
    rocket.style.setProperty("--altura", altura + "px");
    document.body.appendChild(rocket);

    setTimeout(() => {
      rocket.remove();
      explodir(x, window.innerHeight + altura);
    }, 900);
  }
}

function explodir(x, y){
  const particulas = 120;
  for(let i=0;i<particulas;i++){
    const p = document.createElement("div");
    p.className = "firework";
    p.style.left = x + "px";
    p.style.top = y + "px";
    p.style.background = `hsl(${Math.random()*360},100%,60%)`;
    const ang = Math.random() * Math.PI * 2;
    const dist = 150 + Math.random()*250;
    p.style.setProperty("--x", Math.cos(ang)*dist + "px");
    p.style.setProperty("--y", Math.sin(ang)*dist + "px");
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),1400);
  }
}

function responder(resp){
  const pergunta = document.getElementById("pergunta");
  const msg = document.getElementById("msg");

  if(resp === "SIM"){
    etapaAtual++;
    if(etapaAtual < etapas.length){
      pergunta.innerText = etapas[etapaAtual];
      if(etapaAtual === etapas.length - 1) ativarFuga();
      return;
    }
  }

  if(resp === "NAO"){
    let i = 0;
    const show = setInterval(() => {
      fogosAnoNovo();
      i++;
      if(i > 6) clearInterval(show);
    }, 350);

    msg.innerText = "fico triste com uma notÃ­cia dessa ðŸ¥³ðŸŽ‰";
    return;
  }
}
</script>

</body>
</html>
