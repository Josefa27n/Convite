<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convite</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:'Poppins', Arial, sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
  color:white;
  text-align:center;
  background:black;
}

html, body{
  width:100%;
  height:100%;
  overflow:hidden;
}

/* √Årea onde o bot√£o pode fugir */
.safe-area{
  position: fixed;
  top:10%;
  left:10%;
  width:80%;
  height:80%;
  pointer-events:none;
}

/* V√≠deo de fundo */
#bg{
  position:fixed;
  inset:0;
  z-index:-2;
  width:100%;
  height:100%;
  object-fit:cover;
  pointer-events:none;
}

/* Caixa central */
.card{
  position:relative;
  background:rgba(0,0,0,0.65);
  backdrop-filter:blur(6px);
  padding:40px 30px;
  border-radius:18px;
  width:340px;
  max-width:90%;
  box-shadow:0 0 20px rgba(0,0,0,0.7);
  overflow:visible;
}
.tremendo{ animation: tremer 1.8s infinite alternate; }

/* Bot√µes */
button{
  padding:14px 28px;
  margin:8px;
  font-size:18px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  transition:0.2s;
  font-weight:600;
  position:relative;
}
.sim{ background:linear-gradient(45deg,#00c853,#00e676); color:black; }
.nao{ background:linear-gradient(45deg,#d50000,#ff5252); color:white; }

/* Textos */
#nome{ font-size:26px; color:#ffcc00; margin-bottom:10px; }
#pergunta{ font-size:20px; margin-bottom:15px; }
#msg{ font-size:16px; margin-bottom:20px; color:#00e676; }

/* Anima√ß√µes */
@keyframes tremer{
  0%{ transform:translate(0,0) rotate(0deg); }
  50%{ transform:translate(1px,-1px) rotate(0.2deg); }
  100%{ transform:translate(-1px,1px) rotate(-0.2deg); }
}
</style>
</head>
<body>

<video id="bg" autoplay muted loop playsinline webkit-playsinline>
  <source src="fundo.mp4" type="video/mp4" media="(min-width: 769px)">
  <source src="fundo-mobile.mp4" type="video/mp4" media="(max-width: 768px)">
</video>

<div class="safe-area" id="safeArea"></div>

<div class="card tremendo">
  <h1 id="nome"></h1>
  <p id="pergunta">Voc√™ vai?</p>
  <p id="msg"></p>
  <div class="botoes">
    <button class="sim" id="btnSim" onclick="responder('SIM')">SIM</button>
    <button class="nao" onclick="responder('NAO')">N√ÉO</button>
  </div>
</div>

<script>
const nome = new URLSearchParams(location.search).get("nome") || "Convidado";
document.getElementById("nome").innerText = nome + ",";

const btnSim = document.getElementById("btnSim");

function moverBotao(){
  const margem = 8;
  const area = document.getElementById("safeArea").getBoundingClientRect();
  const bw = btnSim.offsetWidth;
  const bh = btnSim.offsetHeight;
  const maxX = area.width - bw;
  const maxY = area.height - bh;
  const btnNao = document.querySelector(".nao");
  const naoRect = btnNao.getBoundingClientRect();

  let x, y;
  let tentativas = 0;

  do{
    x = area.left + Math.random() * maxX;
    y = area.top + Math.random() * maxY;
    tentativas++;
    if(tentativas>50) break;
  } while(
    x > (naoRect.left - bw - margem) &&
    x < (naoRect.right + margem) &&
    y > (naoRect.top - bh - margem) &&
    y < (naoRect.bottom + margem)
  );

  btnSim.style.left = x + "px";
  btnSim.style.top = y + "px";
}

function ativarFuga(){
  const rect = btnSim.getBoundingClientRect();
  btnSim.style.position = "fixed";
  btnSim.style.left = rect.left + "px";
  btnSim.style.top = rect.top + "px";
  btnSim.style.margin = "0";
  btnSim.style.zIndex = "999";

  document.addEventListener("mousemove", (e)=>{
    const btnRect = btnSim.getBoundingClientRect();
    const centroX = btnRect.left + btnRect.width/2;
    const centroY = btnRect.top + btnRect.height/2;
    const dx = e.clientX - centroX;
    const dy = e.clientY - centroY;
    if(Math.sqrt(dx*dx+dy*dy)<120){
      moverBotao();
    }
  });

  btnSim.addEventListener("touchstart", (e)=>{
    e.preventDefault();
    moverBotao();
  });
  btnSim.addEventListener("mousedown", (e)=>{
    e.preventDefault();
    moverBotao();
  });
}

const etapas = [
  "Voc√™ vai?",
  "Voc√™ tem certeza?",
  "Voc√™ tem certeza absoluta?",
  "√â sua √∫ltima chance de dizer n√£o..."
];
let etapaAtual = 0;

function responder(resp){
  const pergunta = document.getElementById("pergunta");
  const msg = document.getElementById("msg");

  if(resp === "SIM"){
    etapaAtual++;
    if(etapaAtual < etapas.length){
      pergunta.innerText = etapas[etapaAtual];
      if(etapaAtual === etapas.length - 1) ativarFuga();
      return;
    }
  }
  if(resp === "NAO"){
    msg.innerText = "fico triste com uma not√≠cia dessa ü•≥üéâ";
  }
}
</script>

</body>
</html>
